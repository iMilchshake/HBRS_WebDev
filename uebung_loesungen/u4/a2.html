<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ãœbung 4 - Aufgabe 1</title>
</head>
<script>

    var persons = []

    // Person prototype
    function Person(n) {
        let person = {
            name: n,
            cars: []
        };

        person.addCar = function(car) {
            person.cars.push(car);
        };

        persons.push(person);
        return person;
    }

    // Auto prototype
    function Car(nr) {
        let car = {
            nr: nr
        };

        return car;
    }

    // conflict method
    function conflict() {
        let found_cars = [];
        let conflict = false;
        persons.forEach(function(p){  // for each person
            p.cars.forEach(function(c){  // for each car
                    if(found_cars.includes(c))
                        conflict = true;  //conflict found!
                    else
                        found_cars.push(c);
                }
            );
        });
        return conflict;
    }

    // declare
    const pers1 = new Person("Rudolf");
    const pers2 = new Person("Kevin");
    const car1 = new Car(123);
    const car2 = new Car(567);

    // add cars to persons
    pers1.addCar(car1);
    pers2.addCar(car2);

    // debug
    console.log("persons now have cars: ", pers1, pers2);
    console.log("persons should be listed in persons: ", persons);
    console.log("conflict found?", conflict(car1));

    // create a conflict
    pers2.addCar(car1);

    // debug (conflict)
    console.log("conflict found?", conflict(car1));

</script>
<body>
<p> check the console </p>
</body>
</html>